<html>
  <head>
    <title>Moving in unison</title>
    <style>
      #paper {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="paper">
    </div>

    <script type="text/javascript" src="lib/raphael-cutting-edge.js"></script>

    <script type="text/javascript">
      var r = Raphael("paper"),
          group = r.group(),
          rotation = 90;

      group.push(r.rect(110, 110, 20, 20));
      group.push(r.rect(130, 130, 20, 20));

      function back () {
        group.animate({x: 210, y: 210, rotation: rotation}, 1000, andForth);
        rotation += 90;
      }

      function andForth() {
        group.animate({x: 130,  y: 130, rotation: rotation}, 1000, back);
        rotation += 90;
      }
      
      back();
    </script>
  </body>
</html>
